From 4872f7a731926173be9a56b01e60e162731738dd Mon Sep 17 00:00:00 2001
From: Kamil Dudka <kdudka@redhat.com>
Date: Wed, 16 Sep 2015 13:00:01 +0200
Subject: [PATCH] fix memory corruption in zipnote caused by invalid fclose()

Bug: https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=628594
---
 zipnote.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/zipnote.c b/zipnote.c
index 5e02cb6..996f012 100644
--- a/zipnote.c
+++ b/zipnote.c
@@ -661,7 +661,7 @@ char **argv;            /* command line tokens */
     if ((r = zipcopy(z)) != ZE_OK)
       ziperr(r, "was copying an entry");
   }
-  fclose(x);
+  fclose(in_file);
 
   /* Write central directory and end of central directory with new comments */
   if ((c = zftello(y)) == (zoff_t)-1)    /* get start of central */
-- 
2.4.6

